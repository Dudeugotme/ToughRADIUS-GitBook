# 系统管理篇

![][image-1]

## 系统参数配置

ToughRADIUS提供了一些全局参数配置，可以通过系统参数配置界面统一管理。

### 系统设置

注意在生产环境中，一般选择关闭DEBUG选项，以免造成日志文件膨胀占用过多存储空间。

![][image-2]

### 自助服务设置

![][image-3]

### 到期提醒设置

![][image-4]

### 邮件服务器设置

![][image-5]

### Radius设置

![][image-6]

## 区域信息管理

系统通过区域提供了对用户进行逻辑分类的支持，界面如下图，支持区域信息的新增，修改和删除。注意：如果区域下已经有用户信息，该区域不允许删除。

![][image-7]


## BAS信息管理

ToughRADIUS系统支持多BAS接入管理，BAS设备信息必须在系统中登记才能和RADIUS进行通信。

BAS设备对应着实际的物理接入网关设备，是具备PPPOE Server功能的路由器或交换机等设备；BAS设备以IP地址为唯一标识，每个BAS与Radius配置对应的共享密钥。

系统支持标准的Radius协议接入，通常大多数BAS设备可以以标准类型配置。但是对于很多厂家的BAS设备，在标准协议下并不能工作的很完美，比如MAC地址，VLAN往往以各自的私有协议封装，Radius为了准确的处理这些信息，必须对这些BAS设备进行类型标识，并在消息处理时进行解析。

ToughRADIUS对各个厂家私有协议处理是可扩展的，通过编写插件可以实现更多的厂家扩展支持。

![][image-8]

CoA端口通常用来下发用户强制下线消息，以及支持一些动态授权管理。


## 操作员管理

系统提供了简洁实用的二级权限管理，通过操作员管理很方便的管理二级操作员权限。

操作员权限管理是一项重要的工作，应该有管理级别的系统管理员来完成，在实际操作过程中，注意不要对普通的操作员赋予过高的权限，这样会带来潜在隐患。

操作员的每次操作都会有系统日志记录，如非必要，不要删除操作员，如果不希望某个操作员再登陆系统管理，可选择停用此操作员。

![][image-9]

操作员表单：

![][image-10]


## 资费信息管理

资费是对计费规则的定义，决定了对每个上网账号如何收费，如何扣费的规则。

系统资费类型支持以下几种：

1. 预付费包月：按自然月定义资费单价，用户可以按需要订购月数。
2. 预付费时长：按小时定义资费单价，用户只需要充值，在实际使用时周期性扣费。
3. 买断包月：预付费包月的一种打包形式，将多个月打包为一个资费，定义资费总价，是一种优惠策略资费形式。
4. 买断时长：时长计费打包的一种方式，一次性将时长打包为一个套餐，是一种优惠策略资费形式。
5. 预付费流量：按流量(MB)定义资费单价,用户只需充值，在实际使用时按使用的流量进行扣费。
6. 买断流量：流量计费打包的一种方式，一次性将流量打包为一个套餐，是一种优惠策略资费形式。

资费管理界面如下：

![][image-11]

资费表单：

![][image-12]

在资费中定义了一些基本的策略，比如绑定，限速，不同BAS类型会将标准限速策略进行转换适配，同时也支持进行策略定制，在资费详情界面，点击增加策略属性可进行定制。

![][image-13]

资费策略配置界面：

![][image-14]

## 黑白名单管理

黑白名单是一个有用的策略管理功能，黑白名单以MAC地址为标识，同时有一个有效范围时间。被加入黑名单的MAC地址进行认证时，在数据校验之前就会被拒绝，在白名单的MAC地址用户在认证时将可不受绑定策略限制。

![][image-15]

黑白名单配置界面：

![][image-16]


## 充值卡管理

充值卡可以提供给用户用来充值或续费，通过系统可以发行充值卡销售，用户购买充值卡自行到自助服务系统进行充值或续费。

充值卡分为资费卡和余额卡两种：资费卡与余额卡。

资费卡：与系统中指定的资费进行绑定，用户可以使用资费充值卡开通该卡绑定的资费的账号，也可以为自己已经订购该资费的账号进行充值。

余额卡：只能开通预付费时长和预付费流量的账号，以及为预付费流量和预付费时长类型账号续费。

充值卡状态：分为未激活，已激活，已使用，已回收四个状态，未激活的卡不可使用，必须通过激活才能销售给用户使用，每个充值卡号码只能使用一次，已使用的卡不能再次充值续费，过期的充值卡会被自动回收或人工回收，回收后的卡不可再激活销售使用。

充值卡管理界面：

![][image-17]

充值卡管理支持查询，导出，卡生成，激活，回收操作，支持按指定条件进行查询，并导出Excel格式的数据（包括密码）。

充值卡生成界面：

![][image-18]







[image-1]:	../imgs/system.png
[image-2]:	../imgs/system_param_sys.png
[image-3]:	../imgs/system_param_customer.png
[image-4]:	../imgs/system_param_notify.png
[image-5]:	../imgs/system_param_mail.png
[image-6]:	../imgs/system_param_radius.png
[image-7]:	../imgs/system_node.png
[image-8]:	../imgs/system_bas.png
[image-9]:	../imgs/system_opr.png
[image-10]:	../imgs/system_opr_form.png
[image-11]:	../imgs/system_product.png
[image-12]:	../imgs/system_product_form.png
[image-13]:	../imgs/system_product_attr.png
[image-14]:	../imgs/system_product_attr_form.png
[image-15]:	../imgs/system_roster.png
[image-16]:	../imgs/system_roster_form.png
[image-17]:	../imgs/system_recharge.png
[image-18]:	../imgs/system_recharge_form.png